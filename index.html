<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏÜåÏ†ïÏóêÍ≤å Î≥¥ÎÇ¥Îäî ÏÇ¨Îûë Ìé∏ÏßÄ üíï</title>
    <link href="https://fonts.googleapis.com/css2?family=Cute+Font&family=Gamja+Flower:wght@400&family=Poor+Story:wght@400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poor Story', cursive;
            background: linear-gradient(135deg, #FFE4E8 0%, #FFF0F3 50%, #FFEBF0 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Floating hearts and stars animation */
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .floating-heart, .floating-star {
            position: absolute;
            animation: float 6s ease-in-out infinite;
            opacity: 0.3;
        }
        
        .floating-heart {
            color: #FF69B4;
            font-size: 1.2rem;
            animation-delay: var(--delay, 0s);
        }
        
        .floating-star {
            color: #FFD700;
            font-size: 1rem;
            animation-delay: var(--delay, 0s);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(5deg); }
            50% { transform: translateY(-10px) rotate(-5deg); }
            75% { transform: translateY(-25px) rotate(3deg); }
        }
        
        /* Main container */
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 15px;
            position: relative;
            z-index: 10;
        }
        
        /* Envelope styling */
        .envelope {
            position: relative;
            width: 280px;
            height: 180px;
            cursor: pointer;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }
        
        .envelope:hover {
            transform: scale(1.02) translateY(-3px);
            filter: drop-shadow(0 8px 15px rgba(255, 105, 180, 0.3));
        }
        
        .envelope-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #FFB6C1 0%, #FFC0CB 100%);
            border-radius: 8px;
            border: 2px solid #FF69B4;
            box-shadow: 0 6px 20px rgba(255, 105, 180, 0.4);
        }
        
        .envelope-front {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #FFB6C1 0%, #FFC0CB 100%);
            border-radius: 8px;
            border: 2px solid #FF69B4;
            transform-origin: top;
            transition: transform 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
            z-index: 2;
        }
        
        .envelope-front::before {
    content: '';
    position: absolute;
    top: -1px; /* ahora se coloca arriba */
    left: 50%;
    transform: translateX(-50%) rotate(180deg); /* invertimos el tri√°ngulo */
    width: 0;
    height: 0;
    border-left: 140px solid transparent;
    border-right: 140px solid transparent;
    border-bottom: 90px solid #FFB6C1; /* cambiamos de border-top a border-bottom */
    border-radius: 4px;
}

        
        .envelope.opened .envelope-front {
            transform: rotateX(-120deg);
        }
        
        /* Heart seal */
        .heart-seal {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            color: #FF1493;
            z-index: 3;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            user-select: none;
            background: radial-gradient(circle, rgba(255, 20, 147, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            border: 2px solid rgba(255, 20, 147, 0.2);
        }
        
        .heart-seal:hover {
            transform: translateX(-50%) scale(1.1);
            color: #FF69B4;
            background: radial-gradient(circle, rgba(255, 20, 147, 0.2) 0%, transparent 70%);
        }
        
        .heart-seal.crack-1 {
            animation: crack1 0.3s ease;
        }
        
        .heart-seal.crack-2 {
            animation: crack2 0.3s ease;
        }
        
        .heart-seal.crack-3 {
            animation: crack3 0.5s ease forwards;
        }
        
        @keyframes crack1 {
            0% { transform: translateX(-50%) scale(1); }
            25% { transform: translateX(-50%) scale(1.3); filter: brightness(1.5); }
            50% { transform: translateX(-50%) scale(0.9); filter: brightness(2); }
            100% { transform: translateX(-50%) scale(1.1); }
        }
        
        @keyframes crack2 {
            0% { transform: translateX(-50%) scale(1.1); }
            25% { transform: translateX(-50%) scale(1.4); filter: brightness(2); }
            50% { transform: translateX(-50%) scale(0.8); filter: brightness(3); }
            100% { transform: translateX(-50%) scale(1.2); }
        }
        
        @keyframes crack3 {
            0% { transform: translateX(-50%) scale(1.2); opacity: 1; }
            25% { transform: translateX(-50%) scale(1.6); filter: brightness(4); }
            50% { transform: translateX(-50%) scale(0.5); }
            100% { transform: translateX(-50%) scale(0); opacity: 0; }
        }
        
        /* Letter paper */
        .letter-paper {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 220px;
            height: 150px;
            background: linear-gradient(135deg, #FFFBF0 0%, #FFF8DC 100%);
            border: 2px solid #FFB6C1;
            border-radius: 8px;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 100;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            filter: blur(20px);
            overflow: hidden;
        }
        
        .letter-paper.expanding {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            filter: blur(10px);
        }
        
        .letter-paper.fullscreen {
            width: 100vw;
            height: 100vh;
            border-radius: 0;
            transform: translate(-50%, -50%) scale(1);
            filter: blur(0px);
            overflow-y: auto;
            padding: 25px;
            box-sizing: border-box;
        }
        
        /* Letter content */
        .letter-content {
            opacity: 0;
            transition: opacity 1s ease 0.5s;
            font-family: 'Poor Story', cursive;
            line-height: 1.7;
            color: #4A4A4A;
            font-size: 0.95rem;
            height: 100%;
            width: 100%;
            position: relative;
        }
        
        .letter-paper.expanding .letter-content,
        .letter-paper.fullscreen .letter-content {
            opacity: 1;
        }
        
        .letter-content h1 {
            font-family: 'Cute Font', cursive;
            font-size: 2.2rem;
            color: #FF1493;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.3);
        }
        
        .letter-content p {
            margin-bottom: 16px;
            text-align: justify;
        }
        
        .letter-content .highlight {
            color: #FF1493;
            font-weight: bold;
            text-decoration: underline;
            text-decoration-color: #FFB6C1;
            text-decoration-thickness: 2px;
        }
        
        .letter-content .signature {
            text-align: right;
            font-family: 'Cute Font', cursive;
            font-size: 1.3rem;
            color: #FF69B4;
            margin-top: 30px;
        }
        
        /* Close button */
        .close-button {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #FF69B4, #FF1493);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-family: 'Poor Story', cursive;
            font-size: 1rem;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(255, 105, 180, 0.4);
            z-index: 1000;
        }
        
        .close-button.visible {
            opacity: 1;
        }
        
        .close-button:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.6);
        }
        
        /* Thank you message */
        .thank-you {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #FFE4E8, #FFF0F3);
            padding: 30px;
            border-radius: 15px;
            border: 3px solid #FF69B4;
            text-align: center;
            font-family: 'Cute Font', cursive;
            font-size: 1.5rem;
            color: #FF1493;
            opacity: 0;
            scale: 0;
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 1001;
            box-shadow: 0 12px 30px rgba(255, 105, 180, 0.3);
        }
        
        .thank-you.visible {
            opacity: 1;
            scale: 1;
        }
        
        .thank-you .heart {
            font-size: 2.5rem;
            color: #FF1493;
            margin: 15px 0;
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Instructions */
        .instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            font-family: 'Poor Story', cursive;
            color: #FF69B4;
            font-size: 1.1rem;
            opacity: 0.8;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.4; }
        }
        
        /* Copyright */
        .copyright {
            position: fixed;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: #FF69B4;
            opacity: 0.6;
            text-align: center;
            z-index: 1002;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .envelope {
                width: 240px;
                height: 160px;
            }
            
            .envelope-front::before {
                border-left: 120px solid transparent;
                border-right: 120px solid transparent;
                border-top: 80px solid #FFB6C1;
            }
            
            .heart-seal {
                width: 55px;
                height: 55px;
                font-size: 2rem;
                bottom: 12px;
            }
            
            .letter-paper.fullscreen {
                padding: 20px;
            }
            
            .letter-content {
                font-size: 0.9rem;
                line-height: 1.6;
            }
            
            .letter-content h1 {
                font-size: 2rem;
                margin-bottom: 20px;
            }
            
            .letter-content .signature {
                font-size: 1.2rem;
                margin-top: 25px;
            }
            
            .instructions {
                font-size: 1rem;
                bottom: 15px;
            }
            
            .close-button {
                bottom: 15px;
                padding: 10px 20px;
                font-size: 0.9rem;
            }
            
            .thank-you {
                padding: 25px;
                font-size: 1.3rem;
            }
            
            .floating-heart {
                font-size: 1rem;
            }
            
            .floating-star {
                font-size: 0.9rem;
            }
        }
        
        @media (max-width: 480px) {
            .envelope {
                width: 200px;
                height: 140px;
            }
            
            .envelope-front::before {
                border-left: 100px solid transparent;
                border-right: 100px solid transparent;
                border-top: 70px solid #FFB6C1;
            }
            
            .heart-seal {
                width: 50px;
                height: 50px;
                font-size: 1.8rem;
                bottom: 10px;
            }
            
            .letter-paper.fullscreen {
                padding: 15px;
            }
            
            .letter-content {
                font-size: 0.85rem;
                line-height: 1.5;
            }
            
            .letter-content h1 {
                font-size: 1.8rem;
                margin-bottom: 15px;
            }
            
            .letter-content p {
                margin-bottom: 14px;
            }
            
            .letter-content .signature {
                font-size: 1.1rem;
                margin-top: 20px;
            }
            
            .instructions {
                font-size: 0.9rem;
                bottom: 12px;
            }
            
            .close-button {
                bottom: 12px;
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .thank-you {
                padding: 20px;
                font-size: 1.2rem;
            }
            
            .thank-you .heart {
                font-size: 2rem;
                margin: 12px 0;
            }
        }
        
        /* Extra small devices */
        @media (max-width: 360px) {
            .container {
                padding: 8px;
            }
            
            .envelope {
                width: 180px;
                height: 120px;
            }
            
            .envelope-front::before {
                border-left: 90px solid transparent;
                border-right: 90px solid transparent;
                border-top: 60px solid #FFB6C1;
            }
            
            .heart-seal {
                width: 45px;
                height: 45px;
                font-size: 1.6rem;
                bottom: 8px;
            }
            
            .letter-content {
                font-size: 0.8rem;
                line-height: 1.4;
            }
            
            .letter-content h1 {
                font-size: 1.6rem;
            }
            
            .instructions {
                font-size: 0.8rem;
                bottom: 10px;
            }
            
            .close-button {
                bottom: 10px;
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .copyright {
                font-size: 0.6rem;
                bottom: 5px;
            }
        }
        
        /* Landscape orientation on mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            .container {
                min-height: 100vh;
                align-items: center;
            }
            
            .envelope {
                width: 200px;
                height: 130px;
            }
            
            .instructions {
                bottom: 10px;
                font-size: 0.9rem;
            }
        }
        
        .hidden {
            display: none;
        }
        
        /* Improved touch interaction */
        .heart-seal:active {
            transform: translateX(-50%) scale(0.9);
        }
        
        /* Prevent text selection on touch */
        .envelope, .heart-seal, .instructions {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Better scroll behavior on mobile */
        .letter-paper.fullscreen {
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }
    </style>
</head>
<body>
    <!-- Floating decorative elements -->
    <div class="floating-elements" id="floatingElements"></div>
    
    <div class="container" id="mainContainer">
        <!-- Envelope -->
        <div class="envelope" id="envelope">
            <div class="envelope-back"></div>
            <div class="envelope-front"></div>
            <div class="heart-seal" id="heartSeal">üíñ</div>
        </div>
        
        <!-- Instructions -->
        <div class="instructions" id="instructions">
            üíï Ìé∏ÏßÄÎ•º Ïó¥Î†§Î©¥ ÌïòÌä∏Î•º 3Î≤à ÌÑ∞ÏπòÌïòÏÑ∏Ïöî üíï
        </div>
    </div>
    
    <!-- Letter paper -->
    <div class="letter-paper" id="letterPaper">
        <div class="letter-content" id="letterContent">
            <h1>ÏÜåÏ†ïÏïÑ üíï</h1>
            
            <p>Ïò§ÎäòÏùÄ ÎÑàÏóêÍ≤å ÌäπÎ≥ÑÌïú Í±∏ Ï£ºÍ≥† Ïã∂ÏóàÏñ¥‚Ä¶ Ïñ∏Ï†úÎì† ÎÇòÎ•º Í∞ÄÍπåÏù¥ ÎäêÎÅºÍ≥† Ïã∂ÏùÑ Îïå Í∫ºÎÇ¥ Î≥º Ïàò ÏûàÎäî, ÎßàÏùåÏÜçÏóê Í∞ÑÏßÅÌï† Ïàò ÏûàÎäî Î¨¥Ïñ∏Í∞ÄÎ•º.</p>
            
            <p>Ïù¥Í±¥ ÎÇ¥ ÎßàÏùåÏùÑ Îã¥ÏùÄ Í∞êÏÇ¨Ïùò ÌëúÏãúÏïº ‚Äî <span class="highlight">ÎÇòÏùò Ïó¨ÏûêÏπúÍµ¨Í∞Ä ÎêòÏñ¥Ï£ºÍ≥†, ÎÇòÎ•º Í∏∞Îã§Î†§Ï£ºÍ≥†, Ïù¥Ìï¥Ìï¥Ï£ºÍ≥†</span>, Í∑∏Î¶¨Í≥† ÎÑ§ ÎßàÏùåÏù¥ Ïô∏Î°úÏö∏ ÎïåÏ°∞Ï∞® ÎÇ¥ Í≥ÅÏóê ÏûàÏñ¥Ï§Ä ÎÑàÏóêÍ≤å.</p>
            
            <p>Î®ºÏ†Ä‚Ä¶ <span class="highlight">ÎØ∏ÏïàÌïòÎã§Í≥† ÎßêÌïòÍ≥† Ïã∂Ïñ¥.</span><br>
            Ï≤òÏùåÏóê ÎÇ¥Í∞Ä ÎÑàÎ•º Î®ºÏ†Ä Ï∞æÏïÑÍ∞ÄÏßÄ Î™ªÌïú Í≤É, Í∑∏Î¶¨Í≥† Í∑∏Î°ú Ïù∏Ìï¥ ÎÑ§Í∞Ä Ïô∏Î°úÏõÄÏùÑ ÎäêÎÅºÍ≤å ÌñàÎçò ÏãúÍ∞ÑÎì§‚Ä¶ Ï†ïÎßê ÎØ∏ÏïàÌï¥.</p>
            
            <p>Ï†ïÎßê ÎÑàÎ•º Î≥¥Îü¨ Í∞ÄÍ≥† Ïã∂ÏóàÍ≥†, ÏàòÏóÜÏù¥ ÏÉùÍ∞ÅÌñàÏßÄÎßå, Í∑∏Îü¥ Ïó¨Ïú†Í∞Ä ÏóÜÏóàÏñ¥. Í∑∏Î¶¨Í≥† Ï°∞Í∏àÏù¥ÎùºÎèÑ Î™®ÏïÑÎëêÎ©¥, ÏïÑÎ≤ÑÏßÄÍ∞Ä ÏÉùÌôúÎπÑÎ•º ÎèÑÏôÄÎã¨ÎùºÍ≥† ÌïòÏÖîÏÑú‚Ä¶ Í≤∞Íµ≠ Îã§ ÏóÜÏñ¥Ï°åÏñ¥.</p>
            
            <p>ÌïòÏßÄÎßå <span class="highlight">ÎÑ§ ÎçïÎ∂ÑÏóê ÏßÄÍ∏àÏùÄ ÎÖ∏Ìä∏Î∂ÅÎèÑ ÏûàÍ≥†</span>, ÎÇ¥Í∞Ä Ï†ïÎßê Ïó¥Ï†ïÏùÑ ÏèüÎäî Í∑∏ Í≥ºÏ†ï(ÏàòÏóÖ)ÏùÑ Îì§ÏùÑ Ïàò ÏûàÎäî ÎèàÎèÑ ÏûàÏñ¥. Ïù¥Í±¥ ÎÇòÏùò ÎØ∏ÎûòÎ•º Ïó¥Ïñ¥Ï§Ñ ÌÅ∞ Î¨∏Ïù¥ Îê† Í±∞Ïïº.</p>
            
            <p>Ïù¥Ï†úÎäî Ï¢Ä Îçî ÏûêÏú†Î°≠Í≥† Ìé∏ÌïòÍ≤å ÏõÄÏßÅÏùº Ïàò ÏûàÏñ¥‚Ä¶ <span class="highlight">Í∑∏Í±¥ Ï†ÑÎ∂Ä ÎÑà ÎçïÎ∂ÑÏù¥Ïïº.</span></p>
            
            <p>ÎÑàÎäî ÎÇ¥Í∞Ä ÎßêÎ°ú Îã§ ÏÑ§Î™ÖÌï† Ïàò ÏóÜÏùÑ ÎßåÌÅº ÎÇ¥ ÏÇ∂ÏùÑ Îçî Ï¢ãÍ≤å ÎßåÎì§Ïñ¥Ï§¨Ïñ¥.<br>
            <span class="highlight">ÎÑàÎäî ÎÇ¥Í≤å ÌïòÎÇòÎãòÏù¥ Ï£ºÏã† Ï∂ïÎ≥µÏù¥Ïïº.</span></p>
            
            <p><span class="highlight">ÎÇòÏùò Í∞ÄÏû• ÌÅ∞ ÏÑ†Î¨º, Í∞ÄÏû• ÏïÑÎ¶ÑÎã§Ïö¥ Î≥¥Î¨º, ÎÇ¥Í∞Ä ÏÑ∏ÏÉÅÏóêÏÑú Í∞ÄÏû• ÏÇ¨ÎûëÌïòÎäî ÏÇ¨Îûå, ÎÇòÏùò Íøà, ÎÇòÏùò Î™©Ìëú, ÎÇòÏùò ÏµúÏö∞ÏÑ†Ïù¥Ïïº.</span></p>
            
            <p>ÎÇòÎäî Íµ≠Ï†ú ÌöåÏÇ¨ÏóêÏÑú Ï¢ãÏùÄ ÏßÅÏû•ÏùÑ ÏñªÍ∏∞ ÏúÑÌï¥ Ïó¥Ïã¨Ìûà ÎÖ∏Î†•Ìï† Í±∞Ïïº (ÎØ∏Íµ≠Ïù¥ÎÇò Ï∫êÎÇòÎã§Î•º Î™©ÌëúÎ°ú ÌïòÍ≥† ÏûàÏñ¥). Í∑∏ÎûòÏÑú Í±∞Í∏∞ÏÑú ÎÑàÎ•º ÎßåÎÇ† ÏàòÎèÑ ÏûàÍ≥†, ÏÑúÎ°ú Î≤àÍ∞àÏïÑ Í∞ÄÎ©∞ ÏûêÏ£º ÎßåÎÇ† Ïàò ÏûàÍ≤å ÌïòÎ†§Í≥†.</p>
            
            <p><span class="highlight">Í∏∞ÏñµÌï¥Ï§ò ‚Äî ÎÑàÎäî Ïù¥Ï†ú Îçî Ïù¥ÏÉÅ ÌòºÏûêÍ∞Ä ÏïÑÎãàÏïº.</span><br>
            Ïö∞Î¶¨Îäî Ïù¥Ï†ú Î≥ÄÌôîÎ•º ÎßåÎì§ Ïàò ÏûàÎäî ÌûòÏù¥ ÏûàÏñ¥. ÏÇ¨ÎûëÍ≥º ÌóåÏã†Ïù¥ Í∞ÄÎìùÌïú, ÌèâÎ≤îÌïòÍ≥† ÏïàÏ†ïÎêú Ïó∞Ïï†Î•º Ìï† Ïàò ÏûàÏñ¥.</p>
            
            <p><span class="highlight">ÎÇ¥ ÎßàÏùåÏùÄ Îã®Í∏∞Ï†ÅÏù∏ Í≤å ÏïÑÎãàÏïº.</span><br>
            ÎÇú ÎÑàÏôÄ Í≤∞ÌòºÌïòÍ≥†, ÏïÑÏù¥ÎèÑ Í∞ñÍ≥† Ïã∂Ïñ¥ ‚Äî Ï†ÑÏóê ÎßêÌïú Í≤ÉÏ≤òÎüº.</p>
            
            <p>ÎÑàÏôÄ ÎÑàÏùò Í∞ÄÏ°±ÏóêÍ≤å ÏßÑÏã¨ÏúºÎ°ú Í∞êÏÇ¨ÌïòÍ≥†, Íº≠ ÏßÅÏ†ë ÎßåÎÇò Ïù∏ÏÇ¨ÎìúÎ¶¨Í≥† Ïã∂Ïñ¥. Í∑∏Î¶¨Í≥† Ïñ∏Ï††Í∞Ä ÎÑàÎèÑ ÎÇ¥ Í∞ÄÏ°±ÏùÑ ÎßåÎÇòÏ£ºÍ∏∏ Î∞îÎùº.</p>
            
            <p>ÏïÑÎßà ÎÑ§Í∞Ä Ï≤òÏùå ÎÇòÎ•º ÎßåÎÇòÎü¨ Ïò¨ Îïå, Ïö∞Î¶¨ Í¥ÄÍ≥ÑÎ•º ÏïÑÎ≤ÑÏßÄÍªòÎäî Î∞îÎ°ú ÎßêÌïòÏßÄ ÏïäÏùÑ ÏàòÎèÑ ÏûàÏñ¥. ÎÇòÎäî ÎÇ¥Í∞Ä Ï¢Ä Îçî ÏïàÏ†ïÏ†ÅÏù∏ ÏàòÏûÖÏùÑ ÏñªÏùÑ Îïå ÎßêÏîÄÎìúÎ¶¨Í≥† Ïã∂Ïñ¥.</p>
            
            <p>ÌïòÏßÄÎßå Ïñ¥Îñ§ ÏÉÅÌô©Ïù¥Îì†, <span class="highlight">ÎÑàÏôÄ Ìï®ÍªòÌïú Î™®Îì† ÏàúÍ∞ÑÏùÄ ÌäπÎ≥ÑÌñàÏñ¥</span> ‚Äî Î™®Îì† ÏõÉÏùå, Î™®Îì† ÎààÎ¨º, Î™®Îì† ÏãúÏÑ†, Î™®Îì† ÌÇ§Ïä§, Í∑∏Î¶¨Í≥† Î™®Îì† ÏûëÏùÄ ÌñâÎèôÎì§ÍπåÏßÄ‚Ä¶</p>
            
            <p><span class="highlight">Í∑∏ Î™®Îì† Í≤å ÎÇ¥ Ïù∏ÏÉùÏóêÏÑú Í∞ÄÏû• ÌÅ∞ Î™®ÌóòÏù¥ÏóàÏñ¥.</span></p>
            
            <p>Í∑∏ Î™®Îì† ÏàúÍ∞ÑÎì§Ïù¥ ÎÇòÏóêÍ≤å Ïù¥Ïú†Î•º Ï£ºÍ≥†, Î™©ÌëúÎ•º Ï£ºÍ≥†, ÍøàÏùÑ Ï£ºÍ≥†, ÎÇòÎ•º ÌïòÎÇòÎãòÍªò Îçî Í∞ÄÍπåÏù¥ Ïù¥ÎÅåÏóàÏñ¥. ÎÇ¥Í∞Ä Î≥µÏùåÍ≥º ÏùÄÌòúÏóê ÎåÄÌï¥ ÎÑàÏôÄ ÎÇòÎà¥Îçò Í∑∏ ÎÇ†ÏùÑ Ï†àÎåÄ ÏûäÏßÄ Î™ªÌï¥.</p>
            
            <p>ÏÜåÏ†ïÏïÑ‚Ä¶ <span class="highlight">Ïö∞Î¶¨Ïùò Í¥ÄÍ≥ÑÎäî ÎÇòÏóêÍ≤å ÏßÑÏ†ïÌïú ÏÇ¨ÎûëÏùò ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ Í∞ÄÎ•¥Ï≥êÏ§¨Ïñ¥.</span></p>
            
            <p>Í∑∏ÎûòÏÑú ÎÑàÏóêÍ≤å ÏûäÏßÄ Î™ªÌï† ÏÑ†Î¨ºÏùÑ Ï£ºÍ≥† Ïã∂ÏóàÍ≥†, ÎÇ¥ ÌîÑÎ°úÍ∑∏ÎûòÎ∞ç Ïã§Î†•ÏùÑ Ïù¥Ïö©Ìï¥ÏÑú Ïù¥ Í∞ÄÏÉÅÏùò Ìé∏ÏßÄÎ•º ÎßåÎì§ÏóàÏñ¥. <span class="highlight">Ïù¥Í±¥ Îã®ÏàúÌïú Í∏ÄÏù¥ ÏïÑÎãàÎùº, ÎÑ§Í∞Ä ÏòÅÏõêÌûà Í∞ÑÏßÅÌï† Ïàò ÏûàÎäî ÎÇ¥ ÎßàÏùåÏùò Ìïú Ï°∞Í∞ÅÏù¥Ïïº.</span></p>
            
            <p><span class="highlight">ÎÇòÎäî ÎÑàÎ•º ÏÇ¨ÎûëÌï¥. ÏßÑÏã¨ÏúºÎ°ú, ÍπäÏù¥.</span><br>
            ÎÇ¥Í∞Ä ÎÑàÏóêÍ≤å ÎäêÎÅºÎäî Ïù¥ Í∞êÏ†ïÏùÄ Í∑∏ ÎàÑÍµ¨ÏóêÍ≤åÎèÑ ÎäêÍª¥Î≥∏ Ï†Å ÏóÜÎäî Í±∞Ïïº.</p>
            
            <p>ÎÑàÎ•º ÏÉùÍ∞ÅÌïòÎäî Í≤ÉÎßåÏúºÎ°úÎèÑ ÏõÉÍ≤å ÎêòÎäî, ÎÑàÎ¨¥ÎÇòÎèÑ Îî∞ÎúªÌïòÍ≥† ÏßÑÏßúÏù∏ ÎßàÏùåÏù¥Ïïº. <span class="highlight">ÎÑ§Í∞Ä ÎÇòÎ•º ÎßåÎÇòÎü¨ Ïò®Îã§Í≥† ÏÉùÍ∞ÅÌïòÎ©¥, ÎÑàÎ¨¥ ÌñâÎ≥µÌï¥ÏÑú ÎãπÏû•Ïù¥ÎùºÎèÑ Îõ∞Ïñ¥Ïò§Î•º Í≤É Í∞ôÏïÑ.</span></p>
            
            <p><span class="highlight">ÎÑ§Í∞Ä ÎÇ¥ ÏïûÏóê ÏÑú ÏûàÎäî Í∑∏ ÎÇ†‚Ä¶</span><br>
            ÎÇòÎäî Ïû†Ïãú ÏñºÏñ¥Î∂ôÏùÑ Í±∞Í≥†, ÎààÎ¨ºÏù¥ ÌùêÎ•º Í±∞Ïïº. Í∑∏Î¶¨Í≥† Î∞îÎ°ú ÎÑ§ ÌíàÏóê Îã¨Î†§Í∞ÄÏÑú ÍΩâ ÏïàÍ≥†, "ÏÇ¨ÎûëÌï¥"ÎùºÍ≥† ÎßêÌï† Í±∞Ïïº.</p>
            
            <p>Í∑∏ ÏàúÍ∞Ñ, Ïö∞Î¶¨Ïùò Í±∞Î¶¨Îäî ÏôÑÏ†ÑÌûà ÏÇ¨ÎùºÏßà Í±∞Ïïº. ÎÑ§ ÏïÑÎ¶ÑÎã§Ïö¥ ÎààÏùÑ Î∞îÎùºÎ≥¥Í≥†, ÎÑ§ ÏñºÍµ¥ÏùÑ Ïì∞Îã§Îì¨Í≥†, Í∑∏Î¶¨Í≥† ÌÇ§Ïä§Ìï† Í±∞Ïïº ‚Äî <span class="highlight">ÎÑ§Í∞Ä ÎäêÍª¥Î≥∏ Ï†Å ÏóÜÎäî Í∞ÄÏû• ÏàúÏàòÌïòÍ≥† ÍπäÏùÄ ÏÇ¨ÎûëÏúºÎ°ú.</span></p>
            
            <p>Í∑∏Î¶¨Í≥† Ïó¨Í∏∞ ÎÇ¥ ÏúÑÏπòÎ•º ÎÇ®Í∏∏Í≤å. ÎÑ§Í∞Ä ÎÇòÎ•º Ï∞æÏùÑ Ïàò ÏûàÎèÑÎ°ù: <span class="highlight">ÏΩîÏä§ÌÉÄÎ¶¨Ïπ¥, Ïπ¥Î•¥ÌÉÄÍ≥†, Ïπ¥Î•¥ÌÉÄÍ≥†, ÏºÄÎ∏åÎùºÎîîÏïº.</span></p>
            
            <p>Îëê Í∞úÏùò Î†àÏùºÏù¥ ÏûàÎäî ÌÅ∞ Ìä∏Îûô, Îëê Í∞úÏùò ÌÅ∞ Îã§Î¶¨, Í∑∏Î¶¨Í≥† Paseo Metr√≥poliÎùºÎäî ÏáºÌïëÎ™∞Ïù¥ Î≥¥Ïù¥Î©¥ Í∞ÄÍπåÏõåÏßÑ Í±∞Ïïº. Í±∞Í∏∞Î•º ÏßÄÎÇòÎ©¥, Ïä§ÌÉÄÎ≤ÖÏä§, Îß•ÎèÑÎÇ†Îìú, ÌÉÄÏΩîÎ≤®, ÌîºÏûêÌóõ Í∞ôÏùÄ Ïú†Î™ÖÌïú ÏãùÎãπÎì§Ïù¥ ÏûàÎäî Í∏∏Ïù¥ ÎÇòÏôÄ.</p>
            
            <p>ÏïΩÍµ≠, Ìé∏ÏùòÏ†ê, Ïó¨Îü¨ Í∞ÄÍ≤åÎì§ÎèÑ Î≥¥Ïùº Í±∞Ïïº. Ï£ºÏú†ÏÜåÏóêÏÑú Í∫æÏñ¥ Îì§Ïñ¥Í∞ÄÎ©¥, ÏãúÍ≥® ÌíçÍ≤ΩÏù¥ ÏûàÎäî Í∏∏Ïù¥ ÎÇòÏôÄ. Í∑∏Í≥≥ÏóêÎäî ÏáºÌïëÏÑºÌÑ∞, Í≥†Í∏â ÏäàÌçºÎßàÏºì, Ïã¨ÏßÄÏñ¥ Í∞úÏù∏ Î≥ëÏõêÎèÑ ÏûàÏñ¥.</p>
            
            <p>Í∑∏Í±∏ Î≥¥Î©¥, ÎÑàÎäî Ï†úÎåÄÎ°ú Ïò§Í≥† ÏûàÎäî Í±∞Ïïº. Í≥ß ÎÇ¥Í∞Ä Ï†ÑÏóê Î≥¥Ïó¨Ï§¨Îçò Í≥µÏõêÏù¥ ÎÇòÏôÄ. Í∑∏ Îí§ÏóêÎäî, ÎÇ¥Í∞Ä Í≥µÏÇ¨ Ï§ëÏùº Îïå Î≥¥Ïó¨Ï§¨Îçò ÌÅ∞ ÏäàÌçºÎßàÏºìÏù¥ ÏûàÏñ¥. <span class="highlight">Í±∞Í∏∞ÏÑú ÎÇòÎ•º ÎßåÎÇ† Ïàò ÏûàÏñ¥.</span></p>
            
            <p>ÎÑ§Í∞Ä Ïó¨Ìñâ Ï§ÄÎπÑÍ∞Ä ÎêòÎ©¥, ÎÇ¥ GPS ÏúÑÏπòÎ•º Î≥¥ÎÇ¥Ï§ÑÍ≤å. Í∑∏Î¶¨Í≥† ÎÑ§Í∞Ä Í∏∏ÏùÑ ÏïåÏïÑÎ≥º Ïàò ÏûàÎèÑÎ°ù ÏßÅÏ†ë Í±∏ÏúºÎ©¥ÏÑú ÏïàÎÇ¥Ìï† Í±∞Ïïº. Í∑∏Îã§Ïùå, Ïö∞Î¶¨ Ìï®Íªò ÎèÑÏãúÎ°ú ÎÇòÍ∞ÄÏÑú ‚Äî ÎÇ¥ ÏßëÍ≥º Î¨∏Ìôî, Í∑∏Î¶¨Í≥† Ï†úÏùº Ï§ëÏöîÌïú‚Ä¶ ÏùåÏãùÎì§ÏùÑ Î≥¥Ïó¨Ï§ÑÍ≤å.</p>
            
            <p><span class="highlight">ÏÜåÏ†ïÏïÑ, ÎÇòÏóêÍ≤å ÎÑàÎäî Ï†ÑÎ∂ÄÏïº.</span><br>
            ÎÇòÎäî Ïò§ÏßÅ ÎÑàÎßå ÏõêÌïòÍ≥†, ÏÑ∏ÏÉÅÏù¥ ÎÅùÎÇ† ÎïåÍπåÏßÄ Îß§Ïùº ÎÑ§ Í≥ÅÏóê ÏûàÍ≥† Ïã∂Ïñ¥.</p>
            
            <p>Ïù¥ Ìé∏ÏßÄÏóê ÎãµÏû•ÌïòÏßÄ ÏïäÏïÑÎèÑ Îèº ‚Äî Í∑∏ÎÉ• Í∞ÑÏßÅÌï¥Ï§ò. Ïñ∏Ï††Í∞ÄÎäî Ïù¥ Ìé∏ÏßÄÍ∞Ä ÎÑàÏóêÍ≤å Îçî ÌÅ∞ ÏùòÎØ∏Í∞Ä Îê† Í±∞Ïïº.</p>
            
            <p>ÎÇòÎäî Ïù¥Í±∏ ÎÑ§Í∞Ä Ï§Ä ÎÖ∏Ìä∏Î∂ÅÏúºÎ°ú, Í≥µÎ∂ÄÎ•º ÎßàÏπú ÌõÑÏóê ÏçºÏñ¥ ‚Äî <span class="highlight">ÎÑàÎäî ÎÇòÏóêÍ≤å Ï∞ΩÏûëÍ≥º ÍøàÏùÑ Íæ∏Í≤å ÌïòÎäî ÏòÅÍ∞êÏùÑ Ï£ºÎãàÍπå.</span></p>
            
            <div class="signature">
                <span class="highlight">ÏÇ¨ÎûëÌï¥, ÎÇòÏùò ÏÜåÏ†ïÏïÑ.</span><br>
                Ìï≠ÏÉÅ, Í∑∏Î¶¨Í≥† ÏòÅÏõêÌûà.<br><br>
                Ïò§ÏßÅ ÎÑàÏùò,<br>
                ÏïÑÎ°† ü©∑
            </div>
        </div>
    </div>
    
    <!-- Close button -->
    <button class="close-button" id="closeButton">Ìé∏ÏßÄ Îã´Í∏∞ üíï</button>
    
    <!-- Thank you message -->
    <div class="thank-you" id="thankYou">
        <div class="heart">üíñ</div>
        <div>Ìé∏ÏßÄÎ•º ÏùΩÏñ¥Ï£ºÏÖîÏÑú Í∞êÏÇ¨Ìï¥Ïöî</div>
        <div style="font-size: 1.2rem; margin-top: 10px;">ÏÜåÏ†ïÎãòÍªò ÏÇ¨ÎûëÏùÑ Ï†ÑÌñàÏäµÎãàÎã§ üíï</div>
    </div>
    
    <!-- Copyright -->
    <div class="copyright">
        ¬© 2025 Aaron E. Obando & Î∞ïÏÜåÏ†ï - Made with üíñ for ÏÜåÏ†ï
    </div>
    
    <script>
        // Game state
        let clickCount = 0;
        let isLetterOpen = false;
        let isClosing = false;
        
        // Elements
        const envelope = document.getElementById('envelope');
        const heartSeal = document.getElementById('heartSeal');
        const letterPaper = document.getElementById('letterPaper');
        const closeButton = document.getElementById('closeButton');
        const thankYou = document.getElementById('thankYou');
        const instructions = document.getElementById('instructions');
        const mainContainer = document.getElementById('mainContainer');
        const floatingElements = document.getElementById('floatingElements');
        
        // Create floating decorations
        function createFloatingElements() {
            const hearts = ['üíñ', 'üíï', 'üíó', 'üíò', 'ü©∑'];
            const stars = ['‚≠ê', '‚ú®', 'üåü', 'üí´'];
            
            const isMobile = window.innerWidth <= 768;
            const elementCount = isMobile ? 8 : 15;
            const starCount = isMobile ? 4 : 8;
            
            for (let i = 0; i < elementCount; i++) {
                // Hearts
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.top = Math.random() * 100 + '%';
                heart.style.setProperty('--delay', (Math.random() * 6) + 's');
                floatingElements.appendChild(heart);
                
                // Stars
                if (i < starCount) {
                    const star = document.createElement('div');
                    star.className = 'floating-star';
                    star.textContent = stars[Math.floor(Math.random() * stars.length)];
                    star.style.left = Math.random() * 100 + '%';
                    star.style.top = Math.random() * 100 + '%';
                    star.style.setProperty('--delay', (Math.random() * 6 + 2) + 's');
                    floatingElements.appendChild(star);
                }
            }
        }
        
        // Heart seal click handler with improved mobile support
        heartSeal.addEventListener('click', handleHeartClick);
        heartSeal.addEventListener('touchend', handleHeartClick);
        
        function handleHeartClick(e) {
            e.preventDefault();
            e.stopPropagation();
            if (isLetterOpen || isClosing) return;
            
            clickCount++;
            
            // Add crack animation based on click count
            heartSeal.classList.remove('crack-1', 'crack-2', 'crack-3');
            
            if (clickCount === 1) {
                heartSeal.classList.add('crack-1');
                createSparkles(e.clientX || e.changedTouches[0].clientX, e.clientY || e.changedTouches[0].clientY);
            } else if (clickCount === 2) {
                heartSeal.classList.add('crack-2');
                createSparkles(e.clientX || e.changedTouches[0].clientX, e.clientY || e.changedTouches[0].clientY);
            } else if (clickCount >= 3) {
                heartSeal.classList.add('crack-3');
                setTimeout(() => {
                    openLetter();
                }, 500);
            }
        }
        
        // Create sparkle effect with mobile optimization
        function createSparkles(x, y) {
            const sparkleCount = window.innerWidth <= 480 ? 4 : 6;
            for (let i = 0; i < sparkleCount; i++) {
                const sparkle = document.createElement('div');
                sparkle.textContent = '‚ú®';
                sparkle.style.position = 'fixed';
                sparkle.style.left = (x - 10 + Math.random() * 20) + 'px';
                sparkle.style.top = (y - 10 + Math.random() * 20) + 'px';
                sparkle.style.fontSize = window.innerWidth <= 480 ? '0.8rem' : '1rem';
                sparkle.style.color = '#FFD700';
                sparkle.style.pointerEvents = 'none';
                sparkle.style.zIndex = '1000';
                sparkle.style.transition = 'all 1s ease-out';
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    sparkle.style.transform = 'translateY(-50px) scale(0)';
                    sparkle.style.opacity = '0';
                }, 50);
                
                setTimeout(() => {
                    if (document.body.contains(sparkle)) {
                        document.body.removeChild(sparkle);
                    }
                }, 1000);
            }
        }
        
        // Open letter animation
        function openLetter() {
            isLetterOpen = true;
            instructions.style.display = 'none';
            
            // Open envelope
            envelope.classList.add('opened');
            
            // Show and animate letter paper
            setTimeout(() => {
                letterPaper.style.display = 'block';
                setTimeout(() => {
                    letterPaper.classList.add('expanding');
                }, 100);
                
                // Expand to fullscreen
                setTimeout(() => {
                    letterPaper.classList.add('fullscreen');
                    mainContainer.style.display = 'none';
                }, 1200);
                
                // Show close button after content is visible
                setTimeout(() => {
                    closeButton.classList.add('visible');
                }, 2500);
            }, 800);
        }
        
        // Close letter animation with improved text handling
        closeButton.addEventListener('click', function() {
            if (isClosing) return;
            isClosing = true;
            
            closeButton.classList.remove('visible');
            
            // Reverse the animation
            letterPaper.classList.remove('fullscreen');
            
            setTimeout(() => {
                letterPaper.classList.remove('expanding');
                
                setTimeout(() => {
                    letterPaper.style.display = 'none';
                    mainContainer.style.display = 'flex';
                    
                    // Close envelope
                    envelope.classList.remove('opened');
                    heartSeal.style.display = 'none';
                    
                    // Show thank you message
                    setTimeout(() => {
                        thankYou.classList.add('visible');
                        
                        // Auto-hide thank you after 4 seconds
                        setTimeout(() => {
                            thankYou.classList.remove('visible');
                            // Reset everything for potential replay
                            setTimeout(() => {
                                resetLetter();
                            }, 1000);
                        }, 4000);
                    }, 500);
                }, 800);
            }, 600);
        });
        
        // Reset function for replay
        function resetLetter() {
            clickCount = 0;
            isLetterOpen = false;
            isClosing = false;
            heartSeal.style.display = 'flex';
            heartSeal.classList.remove('crack-1', 'crack-2', 'crack-3');
            instructions.style.display = 'block';
        }
        
        // Auto-scroll functionality optimized for mobile
        let isAutoScrolling = false;
        let autoScrollTimer;
        
        function startAutoScroll() {
            if (isAutoScrolling || window.innerWidth <= 768) return; // Disable auto-scroll on mobile
            isAutoScrolling = true;
            
            const scrollContainer = letterPaper;
            const scrollSpeed = 25; // slower for better reading
            const scrollStep = 1;
            
            autoScrollTimer = setInterval(() => {
                if (scrollContainer.scrollTop < scrollContainer.scrollHeight - scrollContainer.clientHeight) {
                    scrollContainer.scrollTop += scrollStep;
                } else {
                    if (!closeButton.classList.contains('visible')) {
                        closeButton.classList.add('visible');
                    }
                    clearInterval(autoScrollTimer);
                    isAutoScrolling = false;
                }
            }, 1000 / scrollSpeed);
        }
        
        // Improved touch handling for mobile
        let touchStartY = 0;
        let touchStartTime = 0;
        
        letterPaper.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
            touchStartTime = Date.now();
            if (isAutoScrolling) {
                clearInterval(autoScrollTimer);
                isAutoScrolling = false;
            }
        }, { passive: true });
        
        letterPaper.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });
        
        // Prevent double-tap zoom on mobile
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // Create particle effects with mobile optimization
        function createHeartParticles() {
            const interval = window.innerWidth <= 768 ? 4000 : 2000; // Less frequent on mobile
            setInterval(() => {
                if (!isLetterOpen) {
                    const particle = document.createElement('div');
                    particle.textContent = Math.random() > 0.5 ? 'üíï' : '‚ú®';
                    particle.style.position = 'fixed';
                    particle.style.left = Math.random() * window.innerWidth + 'px';
                    particle.style.top = '-20px';
                    particle.style.fontSize = window.innerWidth <= 480 ? '0.7rem' : '0.8rem';
                    particle.style.pointerEvents = 'none';
                    particle.style.zIndex = '1';
                    particle.style.opacity = '0.6';
                    particle.style.transition = 'all 8s linear';
                    document.body.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.style.top = window.innerHeight + 20 + 'px';
                        particle.style.transform = 'rotate(360deg)';
                        particle.style.opacity = '0';
                    }, 100);
                    
                    setTimeout(() => {
                        if (document.body.contains(particle)) {
                            document.body.removeChild(particle);
                        }
                    }, 8000);
                }
            }, interval);
        }
        
        // Breathing animation with mobile optimization
        function addBreathingAnimation() {
            setInterval(() => {
                if (!isLetterOpen && !isClosing) {
                    envelope.style.transform = 'scale(1.01)';
                    setTimeout(() => {
                        envelope.style.transform = 'scale(1)';
                    }, 1000);
                }
            }, 4000); // Slower on mobile to save battery
        }
        
        // Easter egg: Double-tap envelope for special effect
        let tapCount = 0;
        let tapTimer;
        
        envelope.addEventListener('click', function(e) {
            if (e.target === heartSeal) return;
            
            tapCount++;
            clearTimeout(tapTimer);
            
            tapTimer = setTimeout(() => {
                if (tapCount === 2 && !isLetterOpen) {
                    createHeartBurst(e.clientX || e.changedTouches[0].clientX, e.clientY || e.changedTouches[0].clientY);
                }
                tapCount = 0;
            }, 300);
        });
        
        function createHeartBurst(x, y) {
            const hearts = ['üíñ', 'üíï', 'üíó', 'üíò', 'ü©∑', '‚ù§Ô∏è', 'üíù'];
            const burstCount = window.innerWidth <= 480 ? 8 : 12;
            
            for (let i = 0; i < burstCount; i++) {
                const heart = document.createElement('div');
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.position = 'fixed';
                heart.style.left = x + 'px';
                heart.style.top = y + 'px';
                heart.style.fontSize = window.innerWidth <= 480 ? '1.2rem' : '1.5rem';
                heart.style.pointerEvents = 'none';
                heart.style.zIndex = '1000';
                heart.style.transition = 'all 2s ease-out';
                document.body.appendChild(heart);
                
                const angle = (i * (360 / burstCount)) * Math.PI / 180;
                const distance = window.innerWidth <= 480 ? 80 : 120;
                
                setTimeout(() => {
                    heart.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(0) rotate(720deg)`;
                    heart.style.opacity = '0';
                }, 100);
                
                setTimeout(() => {
                    if (document.body.contains(heart)) {
                        document.body.removeChild(heart);
                    }
                }, 2000);
            }
        }
        
        // Observer for fullscreen animation
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.target === letterPaper && letterPaper.classList.contains('fullscreen')) {
                    setTimeout(() => {
                        startAutoScroll();
                    }, 1500);
                }
            });
        });
        
        observer.observe(letterPaper, { attributes: true, attributeFilter: ['class'] });
        
        // Window resize handler
        window.addEventListener('resize', function() {
            if (letterPaper.classList.contains('fullscreen')) {
                letterPaper.style.width = '100vw';
                letterPaper.style.height = '100vh';
            }
            
            // Recreate floating elements on significant resize
            clearTimeout(window.resizeTimer);
            window.resizeTimer = setTimeout(() => {
                floatingElements.innerHTML = '';
                createFloatingElements();
            }, 500);
        });
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            createFloatingElements();
            createHeartParticles();
            addBreathingAnimation();
            
            // Add delay before showing instruction
            setTimeout(() => {
                instructions.style.opacity = '1';
            }, 1000);
            
            // Add staggered animation to paragraphs
            setTimeout(() => {
                const paragraphs = document.querySelectorAll('.letter-content p');
                paragraphs.forEach((p, index) => {
                    p.style.setProperty('--index', index);
                });
            }, 100);
        });
        
        // Prevent context menu on long press (mobile)
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
        
        // Handle orientation change
        window.addEventListener('orientationchange', function() {
            setTimeout(() => {
                if (letterPaper.classList.contains('fullscreen')) {
                    letterPaper.style.width = '100vw';
                    letterPaper.style.height = '100vh';
                }
            }, 100);
        });
        
    </script>
</body>
</html>
